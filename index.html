<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Band/Orchestra Student Finder</title>
  <!-- PDF.js library for reading PDF text -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js"></script>
  <!-- pdf-lib library for creating the new PDF -->
  <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
  <!-- Custom CSS -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
  <h1>PGCPS Band/Orchestra Student Finder</h1>
  <p class="subtitle">Find and contact potential band/orchestra students in your feeder form reports</p>

  <div class="instruction-box">
    <h3>How to Get Your Student Feeder Report</h3>
    <ol>
      <li>Go to <strong><a href="https://sis.pgcps.org" target="_blank">sis.pgcps.org</a></strong> and click <strong>Apex Reports</strong> at the bottom <em>(only accessible at school or through the VPN)</em></li>
      <li>Top Menu: <strong>School â†’ Enrollment</strong></li>
      <li>Click <strong>"Feeder Forms"</strong></li>
      <li>Set <strong>"Receiving School"</strong> to your school (if shown)</li>
      <li>Set <strong>"Current Grade Level"</strong> to <strong>"-- ALL --"</strong></li>
      <li>Click <strong>"Generate Feeder Forms"</strong></li>
    </ol>
    <p>Upload the downloaded PDF here to automatically find all students currently in band or orchestra. The filtered PDF includes parent contact information so you can reach out to them right away.</p>
  </div>

  <div id="upload-form">
    <div class="form-group">
      <label for="file-upload">Upload Your Feeder Form PDF</label>
      <input type="file" id="file-upload" accept=".pdf">
      <div id="file-info" class="file-info"></div>
    </div>

    <div class="form-group">
      <label for="filter-type">Find Students In:</label>
      <select id="filter-type">
        <option value="both">Both Band and Orchestra</option>
        <option value="band">Only Band</option>
        <option value="orchestra">Only Orchestra</option>
      </select>
    </div>

    <button id="process-button" disabled>Find Students</button>

    <div id="progress-container" class="progress-container hidden">
      <p id="progress-text" class="progress-text">Processing PDF...</p>
      <div class="progress-bar">
        <div id="progress-fill" class="progress-fill"></div>
      </div>
    </div>

    <div id="status-message" class="status-message hidden"></div>
  </div>

  <div id="result-container" class="hidden">
    <div class="status-message success-message" id="summary-message"></div>
    <div class="button-group">
      <a id="download-report" class="download-link" download="band_orchestra_students.pdf">Download Student List</a>
      <button id="reset-button" class="secondary-button">Process Another Report</button>
    </div>
    <div class="pdf-preview">
      <iframe id="pdf-preview" title="PDF Report Preview"></iframe>
    </div>
  </div>

  <footer>
    <p>All processing happens in your browser. No files are uploaded to a server.</p>
  </footer>
</div>

<!-- Custom JavaScript -->
<script src="script.js"></script>
</body>
</html>
